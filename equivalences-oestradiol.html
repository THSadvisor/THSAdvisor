<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convertisseur de Formes Galéniques d'Oestradiol</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Convertisseur de Formes Galéniques</h1>

        <!-- Sélection de la forme galénique -->
        <label for="forme">Choisir une forme galénique :</label>
        <select id="forme" onchange="afficherPosologie()">
            <option value="">Sélectionnez une forme</option>
            <option value="comprime">Comprimés (PROVAMES, OROMONE)</option>
            <option value="gel-estreva">Gel ESTREVA (0.5 mg/pression)</option>
            <option value="gel-oestrodose">Gel OESTRODOSE (0.75 mg/pression)</option>
            <option value="patch">Patch transdermique (FEMSEPT, DERMESTRIL, THAÏS)</option>
        </select>

        <div id="posologie-container"></div>

        <button id="convert-btn" onclick="convertir()" style="display:none;">Convertir</button>

        <div id="resultat"></div>
    </div>

    <script>
        const conversionFacteurs = {
            comprimé_to_sublingual: 0.5,  // 2 mg voie orale = 1 mg sublingual
            comprimé_to_patch: 50,        // 2 mg voie orale = 100 µg/24h patch
            comprimé_to_gel_petite_estreva: 1 / 0.5, // 2 mg voie orale = 1 mg gel (Estreva, petite zone)
            comprimé_to_gel_petite_oestrodose: 1 / 0.75, // 2 mg voie orale = 1,33 mg gel (Oestrodose, petite zone)
            comprimé_to_gel_grande_estreva: 1 / 1.5, // 2 mg voie orale = 1.5 mg gel (Estreva, grande zone)
            comprimé_to_gel_grande_oestrodose: 1 / (1.5 * 0.75), // 2 mg voie orale = 2 pressions gel (Oestrodose, grande zone)
            patch_to_comprimé: 0.02,      // 100 µg/24h patch = 2 mg voie orale
            gel_petite_estreva_to_comprimé: 0.5,    // 1 mg gel (Estreva) = 0.5 mg voie orale
            gel_petite_oestrodose_to_comprimé: 0.75, // 1 mg gel (Oestrodose) = 0.75 mg voie orale
            gel_grande_estreva_to_comprimé: 1.5,  // 1.5 mg gel (grande zone) = 1 mg voie orale
            gel_grande_oestrodose_to_comprimé: 1.5 * 0.75  // Grande zone Oestrodose
        };

        function afficherPosologie() {
            const forme = document.getElementById('forme').value;
            let posologieHtml = '';

            if (forme === 'comprime') {
                posologieHtml = '<label for="posologie-comprime">Posologie (mg/jour) :</label><input type="number" id="posologie-comprime" step="0.1" placeholder="Ex: 2">';
            } else if (forme === 'gel-estreva') {
                posologieHtml = '<label for="posologie-gel">Pressions ESTREVA :</label><input type="number" id="posologie-gel" step="1" placeholder="Ex: 2">';
            } else if (forme === 'gel-oestrodose') {
                posologieHtml = '<label for="posologie-gel">Pressions OESTRODOSE :</label><input type="number" id="posologie-gel" step="1" placeholder="Ex: 2">';
            } else if (forme === 'patch') {
                posologieHtml = '<label for="posologie-patch">Posologie (µg/24h) :</label><input type="number" id="posologie-patch" step="10" placeholder="Ex: 50">';
            }

            document.getElementById('posologie-container').innerHTML = posologieHtml;
            document.getElementById('convert-btn').style.display = 'block';
        }

        function convertir() {
            const forme = document.getElementById('forme').value;
            let resultat = '';

            if (forme === 'comprime') {
                const posologieComprime = parseFloat(document.getElementById('posologie-comprime').value);
                
                // Sublingual
                const sublingual = posologieComprime * conversionFacteurs.comprimé_to_sublingual;

                // Patch
                const patch = posologieComprime * conversionFacteurs.comprimé_to_patch;

                // Gel petite zone
                const gel_petite_estreva = posologieComprime / 0.5;
                const gel_petite_oestrodose = posologieComprime / 0.75;

                // Gel grande zone
                const gel_grande_estreva = posologieComprime / 1.5;
                const gel_grande_oestrodose = posologieComprime / (1.5 * 0.75);

                resultat += `Posologie comprimé (sublingual) : ${sublingual.toFixed(2)} mg/jour<br>`;
                resultat += `Équivalent en patch : ${patch.toFixed(2)} µg/24h<br>`;
                resultat += `Équivalent en gel (petite zone, ESTREVA) : ${gel_petite_estreva.toFixed(2)} pressions (ESTREVA)<br>`;
                resultat += `Équivalent en gel (petite zone, OESTRODOSE) : ${gel_petite_oestrodose.toFixed(2)} pressions (OESTRODOSE)<br>`;
                resultat += `Équivalent en gel (grande zone, ESTREVA) : ${gel_grande_estreva.toFixed(2)} pressions (ESTREVA)<br>`;
                resultat += `Équivalent en gel (grande zone, OESTRODOSE) : ${gel_grande_oestrodose.toFixed(2)} pressions (OESTRODOSE)<br>`;
            }
            if (forme === 'patch') {
                const posologiePatch = parseFloat(document.getElementById('posologie-patch').value);
                
                // Convertir la dose en µg/24h en mg/jour
                const dose_mg_jour = posologiePatch / 1000;
                
                // Comprimé (voie orale)
                const comprimé = dose_mg_jour / conversionFacteurs.patch_to_comprimé;

                // Petite zone
                const gel_petite_estreva = dose_mg_jour / 0.5;
                const gel_petite_oestrodose = dose_mg_jour / 0.75;

                // Grande zone
                const gel_grande_estreva = dose_mg_jour / 1.5;
                const gel_grande_oestrodose = dose_mg_jour / (1.5 * 0.75);

                resultat += `Équivalent en comprimé (voie orale) : ${comprimé.toFixed(2)} mg/jour<br>`;
                resultat += `Équivalent en gel (petite zone, ESTREVA) : ${gel_petite_estreva.toFixed(2)} pressions (ESTREVA)<br>`;
                resultat += `Équivalent en gel (petite zone, OESTRODOSE) : ${gel_petite_oestrodose.toFixed(2)} pressions (OESTRODOSE)<br>`;
                resultat += `Équivalent en gel (grande zone, ESTREVA) : ${gel_grande_estreva.toFixed(2)} pressions (ESTREVA)<br>`;
                resultat += `Équivalent en gel (grande zone, OESTRODOSE) : ${gel_grande_oestrodose.toFixed(2)} pressions (OESTRODOSE)<br>`;
            }

            if (forme === 'gel-estreva' || forme === 'gel-oestrodose') {
                const posologieGel = parseFloat(document.getElementById('posologie-gel').value);
                let comprimé_oral, comprimé_sublingual, patch, gel_grande_estreva, gel_grande_oestrodose;

                if (forme === 'gel-estreva') {
                    // Convertir Estreva vers comprimé, sublingual, patch, et autres formes
                    comprimé_oral = posologieGel * conversionFacteurs.gel_petite_estreva_to_comprimé;
                    comprimé_sublingual = comprimé_oral * conversionFacteurs.comprimé_to_sublingual;
                    patch = comprimé_oral * conversionFacteurs.comprimé_to_patch;
                    gel_grande_estreva = comprimé_oral / conversionFacteurs.comprimé_to_gel_grande_estreva;
                    gel_grande_oestrodose = comprimé_oral / conversionFacteurs.comprimé_to_gel_grande_oestrodose;
                    resultat += `Équivalent en gel (petite zone, ESTREVA) : ${posologieGel} pression(s)<br>`;
                } else if (forme === 'gel-oestrodose') {
                    // Convertir Oestrodose vers comprimé, sublingual, patch, et autres formes
                    comprimé_oral = posologieGel * conversionFacteurs.gel_petite_oestrodose_to_comprimé;
                    comprimé_sublingual = comprimé_oral * conversionFacteurs.comprimé_to_sublingual;
                    patch = comprimé_oral * conversionFacteurs.comprimé_to_patch;
                    gel_grande_estreva = comprimé_oral / conversionFacteurs.comprimé_to_gel_grande_estreva;
                    gel_grande_oestrodose = comprimé_oral / conversionFacteurs.comprimé_to_gel_grande_oestrodose;
                    resultat += `Équivalent en gel (petite zone, OESTRODOSE) : ${posologieGel} pression(s)<br>`;
                }

                resultat += `Équivalent en comprimé (voie orale) : ${comprimé_oral.toFixed(2)} mg/jour<br>`;
                resultat += `Équivalent en comprimé (sublingual) : ${comprimé_sublingual.toFixed(2)} mg/jour<br>`;
                resultat += `Équivalent en patch : ${patch.toFixed(2)} µg/24h<br>`;
                resultat += `Équivalent en gel (grande zone, ESTREVA) : ${gel_grande_estreva.toFixed(2)} pressions (ESTREVA)<br>`;
                resultat += `Équivalent en gel (grande zone, OESTRODOSE) : ${gel_grande_oestrodose.toFixed(2)} pressions (OESTRODOSE)<br>`;
            }

            document.getElementById('resultat').innerHTML = resultat;

            // Note sur les équivalences théoriques
            const noteEquivalences = document.getElementById('note-equivalences');
            if (noteEquivalences) {
                noteEquivalences.innerHTML = 'Les équivalences sont purement théoriques ; en pratique, l\'absorption des différentes formes galéniques peut varier significativement d\'une personne à l\'autre.';
            }
        }
    </script>
</body>
</html>
