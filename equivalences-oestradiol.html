<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THSadvisor - Conversion des Formes Galéniques</title>
    <style>
        body {
            font-family: monospace;
            background-color: #121212;
            color: #FFFFFF;
            margin: 20px;
        }
        .container {
            max-width: 500px;
            margin: auto;
            padding: 20px;
            background-color: #333;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Convertisseur de Formes Galéniques</h1>

        <!-- Sélection de la forme galénique -->
        <label for="forme">Choisir une forme galénique :</label>
        <select id="forme" onchange="afficherPosologie()">
            <option value="">Sélectionnez une forme</option>
            <option value="comprime">Comprimés (PROVAMES, OROMONE)</option>
            <option value="gel-estreva">Gel ESTREVA (0.5 mg/pression)</option>
            <option value="gel-oestrodose">Gel OESTRODOSE (0.75 mg/pression)</option>
            <option value="patch">Patch transdermique (FEMSEPT, DERMESTRIL, THAÏS)</option>
        </select>

        <div id="posologie-container"></div>

        <button id="convert-btn" onclick="convertir()" style="display:none;">Convertir</button>

        <div id="resultat"></div>
    </div>

    <script>
        function afficherPosologie() {
            const forme = document.getElementById('forme').value;
            let posologieHtml = '';

            if (forme === 'comprime') {
                posologieHtml = '<label for="posologie-comprime">Posologie (mg/jour) :</label><input type="number" id="posologie-comprime" step="0.1" placeholder="Ex: 2">';
            } else if (forme === 'gel-estreva') {
                posologieHtml = '<label for="posologie-gel">Pressions ESTREVA :</label><input type="number" id="posologie-gel" step="1" placeholder="Ex: 2">';
            } else if (forme === 'gel-oestrodose') {
                posologieHtml = '<label for="posologie-gel">Pressions OESTRODOSE :</label><input type="number" id="posologie-gel" step="1" placeholder="Ex: 2">';
            } else if (forme === 'patch') {
                posologieHtml = '<label for="posologie-patch">Posologie (µg/24h) :</label><input type="number" id="posologie-patch" step="10" placeholder="Ex: 50">';
            }

            document.getElementById('posologie-container').innerHTML = posologieHtml;
            document.getElementById('convert-btn').style.display = 'block';
        }

        function convertir() {
            const forme = document.getElementById('forme').value;
            let resultat = '';

            // Conversion dynamique entre les formes galéniques
            const conversionFacteurs = {
    comprimé_to_sublingual: 0.5,  // 2 mg voie orale = 1 mg sublingual
    comprimé_to_patch: 50,        // 2 mg voie orale = 100 µg/24h patch
    comprimé_to_gel_petite: 1,    // 2 mg voie orale = 1 mg gel (ESTREVA)
    comprimé_to_gel_grande: 1.5,  // 2 mg voie orale = 1.5 mg gel (grande zone)
    
    // Ajout des conversions pour Oestrodose
    comprimé_to_gel_petite_oestrodose: 1 / 0.75,  // Conversion comprimé vers Oestrodose petite zone
    comprimé_to_gel_grande_oestrodose: 1.5 / 0.75,  // Conversion comprimé vers Oestrodose grande zone

    patch_to_comprimé: 0.02,      // 100 µg/24h patch = 2 mg voie orale
    gel_petite_to_comprimé: 1,    // 1 mg gel (ESTREVA) = 1 mg voie orale
    gel_grande_to_comprimé: 1 / 1.5,  // 1.5 mg gel (grande zone) = 1 mg voie orale
};

            if (forme === 'comprime') {
    const posologieComprime = parseFloat(document.getElementById('posologie-comprime').value);
    const sublingual = posologieComprime * conversionFacteurs.comprimé_to_sublingual;
    const patch = posologieComprime * conversionFacteurs.comprimé_to_patch;
    
    // Estreva
    const gel_petite_estreva = posologieComprime * conversionFacteurs.comprimé_to_gel_petite;
    const gel_grande_estreva = posologieComprime * conversionFacteurs.comprimé_to_gel_grande;

    // Oestrodose
    const gel_petite_oestrodose = posologieComprime / 0.75;  // Conversion comprimé vers Oestrodose petite zone
    const gel_grande_oestrodose = posologieComprime / 1.5 * (1 / 0.75);  // Conversion comprimé vers Oestrodose grande zone

    resultat = `Posologie des comprimés (oral) : ${posologieComprime} mg/jour<br>`;
    resultat += `Posologie des comprimés (sublingual) : ${sublingual} mg/jour<br>`;
    resultat += `Équivalent en patch : ${patch} µg/24h<br>`;
    
    // Affichage Estreva
    resultat += `Équivalent en gel (petite zone, ESTREVA) : ${gel_petite_estreva.toFixed(2)} pressions (ESTREVA)<br>`;
    resultat += `Équivalent en gel (grande zone, ESTREVA) : ${gel_grande_estreva.toFixed(2)} pressions (ESTREVA)<br>`;
    
    // Affichage Oestrodose
    resultat += `Équivalent en gel (petite zone, OESTRODOSE) : ${gel_petite_oestrodose.toFixed(2)} pressions (OESTRODOSE)<br>`;
    resultat += `Équivalent en gel (grande zone, OESTRODOSE) : ${gel_grande_oestrodose.toFixed(2)} pressions (OESTRODOSE)<br>`;
} else if (forme === 'gel-estreva') {
    const posologieGel = parseFloat(document.getElementById('posologie-gel').value);
    const comprimé_oral = posologieGel * conversionFacteurs.gel_petite_to_comprimé;
    const sublingual = comprimé_oral * conversionFacteurs.comprimé_to_sublingual;
    const patch = comprimé_oral * conversionFacteurs.comprimé_to_patch;
    const gel_grande_estreva = comprimé_oral * conversionFacteurs.comprimé_to_gel_grande;
    const gel_petite_oestrodose = posologieGel * 0.5 / 0.75;  // Conversion vers Oestrodose

    resultat = `Nombre de pressions ESTREVA : ${posologieGel} pression(s)<br>`;
    resultat += `Équivalent en comprimés (oral) : ${comprimé_oral} mg/jour<br>`;
    resultat += `Équivalent en comprimés (sublingual) : ${sublingual} mg/jour<br>`;
    resultat += `Équivalent en patch : ${patch} µg/24h<br>`;
    resultat += `Équivalent en gel (OESTRODOSE) : ${gel_petite_oestrodose.toFixed(2)} pressions (OESTRODOSE)<br>`;
} else if (forme === 'gel-oestrodose') {
    const posologieGel = parseFloat(document.getElementById('posologie-gel').value);
    const comprimé_oral = posologieGel * 0.75;  // Oestrodose est à 0.75 mg/pression
    const sublingual = comprimé_oral * conversionFacteurs.comprimé_to_sublingual;
    const patch = comprimé_oral * conversionFacteurs.comprimé_to_patch;
    const gel_grande_oestrodose = comprimé_oral * conversionFacteurs.comprimé_to_gel_grande;
    const gel_petite_estreva = posologieGel * 0.75 / 0.5;  // Conversion vers Estreva

    resultat = `Nombre de pressions OESTRODOSE : ${posologieGel} pression(s)<br>`;
    resultat += `Équivalent en comprimés (oral) : ${comprimé_oral} mg/jour<br>`;
    resultat += `Équivalent en comprimés (sublingual) : ${sublingual} mg/jour<br>`;
    resultat += `Équivalent en patch : ${patch} µg/24h<br>`;
    resultat += `Équivalent en gel (ESTREVA) : ${gel_petite_estreva.toFixed(2)} pressions (ESTREVA)<br>`;
} else if (forme === 'patch') {
                const posologiePatch = parseFloat(document.getElementById('posologie-patch').value);
                const comprimé_oral = posologiePatch * conversionFacteurs.patch_to_comprimé;
                const sublingual = comprimé_oral * conversionFacteurs.comprimé_to_sublingual;
                const gel_petite_estreva = comprimé_oral * conversionFacteurs.comprimé_to_gel_petite;
                const gel_petite_oestrodose = comprimé_oral * conversionFacteurs.comprimé_to_gel_petite / 0.75;
                const gel_grande_estreva = comprimé_oral * conversionFacteurs.comprimé_to_gel_grande;
                const gel_grande_oestrodose = comprimé_oral * conversionFacteurs.comprimé_to_gel_grande / 0.75;

                resultat = `Posologie en patch : ${posologiePatch} µg/24h<br>`;
                resultat += `Équivalent en comprimés (oral) : ${comprimé_oral} mg/jour<br>`;
                resultat += `Équivalent en comprimés (sublingual) : ${sublingual} mg/jour<br>`;
                resultat += `Équivalent en gel (petite zone) : ${gel_petite_estreva} pressions (ESTREVA) ou ${gel_petite_oestrodose} pressions (OESTRODOSE)<br>`;
                resultat += `Équivalent en gel (grande zone) : ${gel_grande_estreva} pressions (ESTREVA) ou ${gel_grande_oestrodose} pressions (OESTRODOSE)`;
            }

            document.getElementById('resultat').innerHTML = resultat;
        }
    </script>
</body>
</html>
